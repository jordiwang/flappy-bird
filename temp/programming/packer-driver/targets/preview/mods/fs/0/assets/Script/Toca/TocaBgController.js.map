{"version":3,"sources":["file:///Users/point/projects/flappy-bird/assets/Script/Toca/TocaBgController.ts"],"names":["_decorator","Component","Vec3","Node","ccclass","property","TocaBgController","start","node","on","EventType","TOUCH_START","onTouchStart","TOUCH_MOVE","onTouchMove","touch","getPosition","_curPos","_deltaX","console","log","_startX","getUILocation","x","targetX","_outerWidth","_targetPos","update","setPosition"],"mappings":";;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,I,OAAAA,I;;;;;;;AAC9BC,MAAAA,O,GAAsBJ,U,CAAtBI,O;AAASC,MAAAA,Q,GAAaL,U,CAAbK,Q;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;kCAGaC,gB,WADZF,OAAO,CAAC,kBAAD,C;;;;;;;;;;;;oEASoB,IAAIF,IAAJ,E;;uEAEG,IAAIA,IAAJ,E;;;;;;wEAIG,K;;;;;;;eAE9BK,K,GAAA,iBAAS;AACL,eAAKC,IAAL,CAAUC,EAAV,CAAaN,IAAI,CAACO,SAAL,CAAeC,WAA5B,EAAyC,KAAKC,YAA9C,EAA4D,IAA5D;AACA,eAAKJ,IAAL,CAAUC,EAAV,CAAaN,IAAI,CAACO,SAAL,CAAeG,UAA5B,EAAwC,KAAKC,WAA7C,EAA0D,IAA1D;AACH,S;;eAEDF,Y,GAAA,sBAAaG,KAAb,EAA2B;AACvB,eAAKP,IAAL,CAAUQ,WAAV,CAAsB,KAAKC,OAA3B;AACA,eAAKC,OAAL,GAAe,CAAf;AACAC,UAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACA,eAAKC,OAAL,GAAeN,KAAK,CAACO,aAAN,GAAsBC,CAArC;AAEH,S;;eAEDT,W,GAAA,qBAAYC,KAAZ,EAAyB;AACrB,eAAKG,OAAL,GAAeH,KAAK,CAACO,aAAN,GAAsBC,CAAtB,GAA0B,KAAKF,OAA9C;AACA,cAAIG,OAAO,GAAG,KAAKP,OAAL,CAAaM,CAAb,GAAiB,KAAKL,OAApC;;AACA,cAAIM,OAAO,GAAG,KAAKC,WAAnB,EAA+B;AAC3BD,YAAAA,OAAO,GAAG,KAAKC,WAAf;AACH,WAFD,MAEO,IAAID,OAAO,GAAG,CAAC,KAAKC,WAApB,EAAiC;AACpCD,YAAAA,OAAO,GAAG,CAAC,KAAKC,WAAhB;AACH;;AACD,eAAKC,UAAL,CAAgBH,CAAhB,GAAoBC,OAApB;AACH,S;;eAEDG,M,GAAA,kBAAQ;AACJ,eAAKnB,IAAL,CAAUoB,WAAV,CAAsB,KAAKF,UAA3B;AACH,S;;;QA1CiCzB,S;AA6CtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["\r\nimport { _decorator, Component, Vec3, Node, Touch } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n/**\r\n * Predefined variables\r\n * Name = TocaBgController\r\n * DateTime = Fri Nov 26 2021 16:28:47 GMT+0800 (中国标准时间)\r\n * Author = pointpeng\r\n * FileBasename = TocaBgController.ts\r\n * FileBasenameNoExtension = TocaBgController\r\n * URL = db://assets/Script/Toca/TocaBgController.ts\r\n * ManualUrl = https://docs.cocos.com/creator/3.3/manual/en/\r\n *\r\n */\r\n \r\n@ccclass('TocaBgController')\r\nexport class TocaBgController extends Component {\r\n    // [1]\r\n    // dummy = '';\r\n\r\n    // [2]\r\n    // @property\r\n    // serializableDummy = 0;\r\n\r\n    private _curPos: Vec3 = new Vec3();\r\n\r\n    private _targetPos: Vec3 = new Vec3();\r\n\r\n    private _startX: number;\r\n    private _deltaX: number;\r\n    private _outerWidth: number = 512.5;\r\n\r\n    start () {\r\n        this.node.on(Node.EventType.TOUCH_START, this.onTouchStart, this);\r\n        this.node.on(Node.EventType.TOUCH_MOVE, this.onTouchMove, this);\r\n    }\r\n\r\n    onTouchStart(touch: Touch) {\r\n        this.node.getPosition(this._curPos);\r\n        this._deltaX = 0;\r\n        console.log('startTouch');\r\n        this._startX = touch.getUILocation().x;\r\n\r\n    }\r\n\r\n    onTouchMove(touch: Touch){\r\n        this._deltaX = touch.getUILocation().x - this._startX;\r\n        let targetX = this._curPos.x + this._deltaX;\r\n        if (targetX > this._outerWidth){\r\n            targetX = this._outerWidth;\r\n        } else if (targetX < -this._outerWidth) {\r\n            targetX = -this._outerWidth;\r\n        }\r\n        this._targetPos.x = targetX;\r\n    }\r\n\r\n    update(){\r\n        this.node.setPosition(this._targetPos);\r\n    }\r\n}\r\n\r\n/**\r\n * [1] Class member could be defined like this.\r\n * [2] Use `property` decorator if your want the member to be serializable.\r\n * [3] Your initialization goes here.\r\n * [4] Your update function goes here.\r\n *\r\n * Learn more about scripting: https://docs.cocos.com/creator/3.3/manual/en/scripting/\r\n * Learn more about CCClass: https://docs.cocos.com/creator/3.3/manual/en/scripting/ccclass.html\r\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.3/manual/en/scripting/life-cycle-callbacks.html\r\n */\r\n"]}