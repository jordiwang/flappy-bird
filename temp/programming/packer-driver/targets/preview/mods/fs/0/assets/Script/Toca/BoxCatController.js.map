{"version":3,"sources":["file:///Users/point/projects/flappy-bird/assets/Script/Toca/BoxCatController.ts"],"names":["_decorator","Component","Node","Animation","Vec3","Vec2","ccclass","property","BoxCatController","start","_animation","node","getComponent","on","EventType","TOUCH_START","onTouchStart","TOUCH_MOVE","onTouchMove","TOUCH_END","onTouchEnd","TOUCH_CANCEL","touch","play","getPosition","_curPos","_startPos","getUILocation","movePos","_targetPos","x","y","console","log","update","setPosition"],"mappings":";;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,I,OAAAA,I;;;;;;;AAC/CC,MAAAA,O,GAAsBN,U,CAAtBM,O;AAASC,MAAAA,Q,GAAaP,U,CAAbO,Q;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;kCAGaC,gB,WADZF,OAAO,CAAC,kBAAD,C;;;;;;;;;;;;;;oEAUoB,IAAIF,IAAJ,E;;uEACG,IAAIA,IAAJ,E;;sEACD,IAAIC,IAAJ,E;;;;;;;eAE1BI,K,GAAA,iBAAS;AACL,eAAKC,UAAL,GAAkB,KAAKC,IAAL,CAAUC,YAAV,CAAuBT,SAAvB,CAAlB;AACA,eAAKQ,IAAL,CAAUE,EAAV,CAAaX,IAAI,CAACY,SAAL,CAAeC,WAA5B,EAAyC,KAAKC,YAA9C,EAA4D,IAA5D;AACA,eAAKL,IAAL,CAAUE,EAAV,CAAaX,IAAI,CAACY,SAAL,CAAeG,UAA5B,EAAwC,KAAKC,WAA7C,EAA0D,IAA1D;AACA,eAAKP,IAAL,CAAUE,EAAV,CAAaX,IAAI,CAACY,SAAL,CAAeK,SAA5B,EAAuC,KAAKC,UAA5C,EAAwD,IAAxD;AACA,eAAKT,IAAL,CAAUE,EAAV,CAAaX,IAAI,CAACY,SAAL,CAAeO,YAA5B,EAA0C,KAAKD,UAA/C,EAA2D,IAA3D;AACH,S;;eAEDJ,Y,GAAA,sBAAaM,KAAb,EAA2B;AACvB,eAAKZ,UAAL,CAAgBa,IAAhB,CAAqB,UAArB;;AACA,eAAKZ,IAAL,CAAUa,WAAV,CAAsB,KAAKC,OAA3B;AACA,eAAKC,SAAL,GAAiBJ,KAAK,CAACK,aAAN,EAAjB;AACH,S;;eAEDT,W,GAAA,qBAAYI,KAAZ,EAA0B;AACtB,cAAMM,OAAO,GAAGN,KAAK,CAACK,aAAN,EAAhB;AACA,eAAKE,UAAL,CAAgBC,CAAhB,GAAoB,KAAKL,OAAL,CAAaK,CAAb,IAAkBF,OAAO,CAACE,CAAR,GAAY,KAAKJ,SAAL,CAAeI,CAA7C,CAApB;AACA,eAAKD,UAAL,CAAgBE,CAAhB,GAAoB,KAAKN,OAAL,CAAaM,CAAb,IAAkBH,OAAO,CAACG,CAAR,GAAY,KAAKL,SAAL,CAAeK,CAA7C,CAApB;AACH,S;;eAEDX,U,GAAA,oBAAWE,KAAX,EAAyB;AACrBU,UAAAA,OAAO,CAACC,GAAR,CAAYX,KAAK,CAACK,aAAN,GAAsBG,CAAlC;;AACA,eAAKpB,UAAL,CAAgBa,IAAhB,CAAqB,UAArB;AACH,S;;eAEDW,M,GAAA,kBAAQ;AACJ,eAAKvB,IAAL,CAAUwB,WAAV,CAAsB,KAAKN,UAA3B;AACH,S;;;QAxCiC5B,S;AA2CtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["\r\nimport { _decorator, Component, Node, Animation, Vec3, Vec2, Touch } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n/**\r\n * Predefined variables\r\n * Name = BoxCatController\r\n * DateTime = Sun Nov 28 2021 17:32:50 GMT+0800 (中国标准时间)\r\n * Author = pointpeng\r\n * FileBasename = BoxCatController.ts\r\n * FileBasenameNoExtension = BoxCatController\r\n * URL = db://assets/Script/Toca/BoxCatController.ts\r\n * ManualUrl = https://docs.cocos.com/creator/3.3/manual/en/\r\n *\r\n */\r\n \r\n@ccclass('BoxCatController')\r\nexport class BoxCatController extends Component {\r\n    // [1]\r\n    // dummy = '';\r\n\r\n    // [2]\r\n    // @property\r\n    // serializableDummy = 0;\r\n\r\n    private _animation : Animation;\r\n    private _curPos: Vec3 = new Vec3();\r\n    private _targetPos: Vec3 = new Vec3();\r\n    private _startPos: Vec2 = new Vec2();\r\n\r\n    start () {\r\n        this._animation = this.node.getComponent(Animation);\r\n        this.node.on(Node.EventType.TOUCH_START, this.onTouchStart, this);\r\n        this.node.on(Node.EventType.TOUCH_MOVE, this.onTouchMove, this);\r\n        this.node.on(Node.EventType.TOUCH_END, this.onTouchEnd, this);\r\n        this.node.on(Node.EventType.TOUCH_CANCEL, this.onTouchEnd, this);\r\n    }\r\n\r\n    onTouchStart(touch: Touch) {\r\n        this._animation.play('BoxCat_1');\r\n        this.node.getPosition(this._curPos);\r\n        this._startPos = touch.getUILocation();\r\n    }\r\n\r\n    onTouchMove(touch: Touch) {\r\n        const movePos = touch.getUILocation();\r\n        this._targetPos.x = this._curPos.x + (movePos.x - this._startPos.x);\r\n        this._targetPos.y = this._curPos.y + (movePos.y - this._startPos.y);\r\n    }\r\n\r\n    onTouchEnd(touch: Touch) {\r\n        console.log(touch.getUILocation().x);\r\n        this._animation.play('BoxCat_2');\r\n    }\r\n\r\n    update(){\r\n        this.node.setPosition(this._targetPos);\r\n    }\r\n}\r\n\r\n/**\r\n * [1] Class member could be defined like this.\r\n * [2] Use `property` decorator if your want the member to be serializable.\r\n * [3] Your initialization goes here.\r\n * [4] Your update function goes here.\r\n *\r\n * Learn more about scripting: https://docs.cocos.com/creator/3.3/manual/en/scripting/\r\n * Learn more about CCClass: https://docs.cocos.com/creator/3.3/manual/en/scripting/ccclass.html\r\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.3/manual/en/scripting/life-cycle-callbacks.html\r\n */\r\n"]}